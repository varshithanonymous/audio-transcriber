{% extends "base.html" %}

{% block title %}Transcription - LinguaVoice{% endblock %}

{% block content %}
<div style="text-align: center; max-width: 600px; margin: 2rem auto;">
    <h1>Real-time Transcription</h1>
    <p style="color: var(--text-muted); margin-bottom: 2rem;">
        For interactive learning and tracking, we recommend using the <a href="/tutor" style="color: var(--primary);">AI
            Tutor</a>.
    </p>

    <div class="card">
        <div id="transcript-box" style="min-height: 200px; text-align: left; max-height: 400px; overflow-y: auto;">
            <div style="color: var(--text-muted); text-align: center; padding-top: 2rem;">
                Transcripts will appear here...
            </div>
        </div>
    </div>

    <div style="margin-top: 1rem;">
        <p style="font-size: 0.9rem; color: var(--text-muted);">
            This is a raw view. Use the AI Tutor for the full experience.
        </p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    setInterval(async () => {
        const res = await fetch('/data?limit=10');
        const data = await res.json();
        const box = document.getElementById('transcript-box');
        if (data.length > 0) {
            box.innerHTML = data.map(t => `
                <div style="border-bottom: 1px solid var(--border); padding: 0.5rem 0;">
                    <div style="font-size: 0.75rem; color: var(--text-muted);">${t.timestamp} [${t.language}]</div>
                    <div>${t.text}</div>
                </div>
            `).join('');
        }
    }, 2000);
</script>
{% endblock %}